{% extends "base.html" %}
{% block content %}

<h2>ğŸ›  ä¿®å¾©æ¡ˆãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>

<h3>å·®åˆ†ãƒã‚¤ãƒ©ã‚¤ãƒˆ</h3>
<div style="background: #f9f9f9; padding: 10px; border: 1px solid #ccc;">
  {{ diff_html|safe }}
</div>

<h3>ğŸ§  ä¿®å¾©æ¡ˆã®è©•ä¾¡ã‚¹ã‚³ã‚¢</h3>
<ul>
  <li><strong>Intent Match:</strong> {{ repaired.evaluations.claude.intent_match }}</li>
  <li><strong>Quality Score:</strong> {{ repaired.evaluations.claude.quality_score }}</li>
  <li><strong>ç†ç”±:</strong> {{ repaired.evaluations.claude.intent_reason }}</li>
</ul>

<form method="post" action="{{ url_for('structure.adopt_structure', improved_id=repaired.id, original_id=original.id) }}">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button class="btn btn-success">âœ… ä¿®å¾©æ¡ˆã‚’æ¡ç”¨ã™ã‚‹</button>
</form>

<form method="post" action="{{ url_for('structure.save_as_new_structure', improved_id=repaired.id) }}" style="margin-top: 8px;">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button class="btn btn-primary">ğŸ“„ åˆ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜</button>
</form>

<form method="post" action="{{ url_for('structure.discard_structure', improved_id=repaired.id) }}" style="margin-top: 8px;">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button class="btn btn-danger">ğŸ—‘ ä¿®å¾©æ¡ˆã‚’ç ´æ£„ã™ã‚‹</button>
</form>

{% endblock %}
